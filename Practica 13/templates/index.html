{% extends "plantilla.html" %}

{% block body %}
<title>Formulario Albums</title>

{% with messages = get_flashed_messages() %}
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-warning alert-dismissible fade show mt-5" role="alert">
            <strong>{{ message }}</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        {% endfor %}
    {% endif %}
{% endwith %}

<h2 class="text-center mt-5 mb-5 display-4 text-danger">Gestion de albums</h2>
<div class="row">
    <div class="col-md-5">
        <form action="{{ url_for('guardarAlbum') }}" method="post">
            <label for="txtTitulo">Título:</label>
            <input type="text" id="txtTitulo" name="txtTitulo" required>
        
            <label for="txtArtista">Artista:</label>
            <input type="text" id="txtArtista" name="txtArtista" required>
        
            <label for="txtAnio">Año:</label>
            <input type="number" id="txtAnio" name="txtAnio" required>
        
            <button type="submit" class="btn btn-primary">Guardar Álbum</button>
        </form>
    </div>
    <div class="col-md-7">
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<h1>FORMULARIO</h1>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>ID</th>
            <th>Título</th>
            <th>Artista</th>
            <th>Año</th>
            <th>Operaciones</th>
        </tr>
    </thead>
    <tbody>
        {% for album in albums %}
        <tr>
            <td>{{ album[0] }}</td>
            <td>{{ album[1] }}</td>
            <td>{{ album[2] }}</td>
            <td>{{ album[3] }}</td>
            <td>
                <a href="{{ url_for('editar', id=album[0]) }}" class="btn btn-warning">Editar</a>
                <a href="{{ url_for('eliminar', id=album[0]) }}" class="btn btn-danger" onclick="return confirm('¿Estás seguro de que deseas eliminar este álbum?');">Eliminar</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
